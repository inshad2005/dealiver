<div [@routerTransition]>
    <app-page-header [heading]="'Deal  Management'" [icon]="'fa-cubes'"></app-page-header>
    <div class="row">
        <div class="col col-xl-12 col-lg-12">
            <div class="card mb-6">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <div class="collapse navbar-collapse">
                        <div class="mr-auto">
                            <span>
                                <button (click)="table_toggele()" type="submit" class="profile-page-button btn btn-primary add-new-margin-left"><span *ngIf="table">Show Textual Deal</span> <span *ngIf="!table">Show Normal Deal</span></button>
                                
                            </span>
                        </div>
                        <form class="form-inline my-2 my-lg-0 right">
                            <div class="form-inline my-2 my-lg-0 right">
                                <input (input)="searchUser(pager,pager2)" [(ngModel)]="searchInput" name='searchInput' class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
                                <!-- <button class="btn btn-outline-success my-2 my-sm-0" >Search</button> -->
                            </div>
                        </form>
                    </div>
                </nav>
               <div class="table-responsive" *ngIf="table">
                   <table matSort (matSortChange)="sortData($event)" class="card-body table">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th mat-sort-header="deal_title">Deal Title</th>
                            <th mat-sort-header="deal_type">Deal Type</th>
                            <th mat-sort-header="price">Price</th>
                            <th mat-sort-header="rsf">RSF</th>
                            <th mat-sort-header="cap">CAP</th>
                            <th mat-sort-header="grm">GRM</th>
                            <th mat-sort-header="lot_size">Lot Size</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody *ngIf="dealsDataBackup && deals && sortedData">
                            <tr *ngFor="let deal of sortedData;let i = index "  [class]="getClass(i)">
                                <th scope="row">{{(pageIndex*pageSize)+i+1}}</th>
                                <td >
                                    <span >{{deal.deal_title}}</span>
                                    
                                </td>
                                <td >
                                    <span >{{deal.deal_type}}</span>
                                    
                                </td>
                                <td >
                                    <span >{{deal.price}}</span>
                                    
                                </td>
                                <td >
                                    <span >{{deal.rsf}}</span>
                                    
                                </td>
                                <td >
                                    <span >{{deal.cap}}</span>
                                    
                                </td>
                                <td >
                                    <span >{{deal.grm}}</span>
                                    
                                </td>
                                <td >
                                    <span >{{deal.lot_size}}</span>
                                    
                                </td>

                                <td >
                                     <span class="cus-switch">
                                        <label class="switch m-b-0">
                                            <input type="checkbox" [(ngModel)]="deal.status" (change)="onStatusChange(deal);">
                                            <span class="slider round"></span>
                                        </label>
                                    </span>
                                </td>
                                <td >
                                    <a  href="javascript:void(0)" class="fa fa-trash fa-fw fa-lg user-button" (click)="openConfirm(deal)"></a>
                                    <a  href="javascript:void(0)" class="fa fa-eye fa-fw fa-lg user-button" (click)="openDialog(deal)"></a>
                                </td>
                            </tr>

                        </tbody>

                  </table>
                     <mat-paginator *ngIf="table"  #pager [length]="dealsDataBackup.length"
                                  [pageSize]="pageSize"
                                  [pageSizeOptions]="[5, 10, 25, 100]" (page)="pageoption($event)">
                    </mat-paginator>
               </div>
               
                <div class="table-responsive" *ngIf="!table">
                   <table matSort (matSortChange)="sortData1($event)" class="card-body table" >
                        <thead>
                        <tr>
                            <th>#</th>
                            <th mat-sort-header="text">Text</th>
                            <th>Image</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody *ngIf="dealsDataBackupType2 && dealsType2 && sortedData1">
                            <tr *ngFor="let deal of sortedData1;let i = index "  [class]="getClass(i)">
                                <th scope="row">{{(pageIndex2*pageSize2)+i+1}}</th>
                                <td >
                                    <span >{{deal.text}}</span>
                                    
                                </td>
                                <td >
                                    <div *ngIf="deal" ><img [src]="check_img(deal.image)" width="150px" alt="image can't load"></div>
                                    
                                </td>
                                
                                <td >
                                     <span class="cus-switch">
                                        <label class="switch m-b-0">
                                            <input type="checkbox" [(ngModel)]="deal.status" (change)="onStatusChange(deal);">
                                            <span class="slider round"></span>
                                        </label>
                                    </span>
                                </td>
                                <td >
                                    <a  href="javascript:void(0)" class="fa fa-trash fa-fw fa-lg user-button" (click)="openConfirm(deal)"></a>
                                </td>
                            </tr>

                        </tbody>

                  </table>
                     <mat-paginator *ngIf="!table" #pager2 [length]="dealsDataBackupType2.length"
                                  [pageSize]="pageSize2"
                                  [pageSizeOptions]="[5, 10, 25, 100]" (page)="pageoption2($event)">
                    </mat-paginator>
               </div>
               
            </div>
        </div>
    </div>
</div>
